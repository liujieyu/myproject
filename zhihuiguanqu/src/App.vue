<template>
  <div id="app">
    <!-- 顶部导航 -->
    <div
      class="topNav"
      style="position: absolute; width: 100%; left:0; top: 0; z-index: 1; opacity: 1;"
    >
      <el-menu
        class="el-menu-demo"
        style
        background-color="#2d8cf0"
        text-color="#fff"
        active-text-color="#ffd04b"
        mode="horizontal"
        @select
      >
        <el-menu-item index="1" :disabled="true" style="opacity: 1;">
          <span style="font-size: 24px; color: #fff;font-weight: 400;text-shadow:#000 5px 6px 7px;">智慧量测水系统</span>
        </el-menu-item>
        <el-menu-item index="1" :disabled="true" style="opacity: 1;">
          <el-switch
            @change="switchchange"
            active-text="地图"
            inactive-text="报表"
            :active-value="1"
            :inactive-value="0"
            v-model="mapBox_show"
            active-color="#808695"
          ></el-switch>
        </el-menu-item>
      </el-menu>
    </div>
    <!-- 地图 -->
    <div v-show="mapBox_show == 1" id="mapBox">
      <!-- 地图 -->
      <div id="map"></div>

      <!-- 工具条 -->
      <div class="tool-box">
        <!-- 地图视图默认位置还原按钮 -->
        <div id="mapViewReductionButton" @click="restoreMapView">
          <Icon type="ios-home-outline"></Icon>
        </div>
        <!-- 基础 -->
        <el-popover>
          <template v-for="(item,index) in FeatrueLayers_base">
            <div style="margin: 5px;">
              <el-switch
                disabled
                v-model="item.show"
                @change="OnLayerChange(item)"
                :active-text="item.title"
                inactive-text
                active-value="1"
                inactive-value="0"
              ></el-switch>
            </div>
          </template>
          <el-button slot="reference" type="text" style="margin-left: 20px; margin-right: 20px;">基础</el-button>
        </el-popover>
        <!-- 监测（正在做。。） -->
        <el-popover>
          <template v-for="(item,index) in FeatrueLayers">
            <div style="margin: 5px;">
              <el-switch
                v-model="item.show"
                @change="OnLayerChange(item)"
                :active-text="item.title"
                inactive-text
                active-value="1"
                inactive-value="0"
              ></el-switch>
            </div>
          </template>
          <template v-if="FeatrueLayers.length > 0" v-for="(item,index) in FeatrueLayers_waiting">
            <div style="margin: 5px;">
              <el-switch
                disabled
                v-model="item.show"
                :active-text="item.title"
                inactive-text
                active-value="1"
                inactive-value="0"
              ></el-switch>
            </div>
          </template>
          <el-button slot="reference" type="text" style="margin-left: 20px;margin-right: 20px;">监测</el-button>
        </el-popover>
        <!-- 控制 -->
        <el-popover>
          <template  v-for="(item,index) in FeatrueLayers_control">
            <div style="margin: 5px;">
              <el-switch
                disabled
                v-model="item.show"
                :active-text="item.title"
                inactive-text
                active-value="1"
                inactive-value="0"
              ></el-switch>
            </div>
          </template>
          <el-button slot="reference" type="text" style="margin-left: 20px; margin-right: 20px;">控制</el-button>
        </el-popover>
        <!-- 分析 -->
        <el-popover>
          <div style="text-align:center">待开发</div>
          <el-button slot="reference" type="text" style="margin-left: 20px; margin-right: 20px;">分析</el-button>
        </el-popover>
        <!-- 图层 -->
        <el-popover>
          <template v-for="(item,index) in FeatrueLayers_layer">
            <div style="margin: 5px;">
              <el-switch
                disabled
                v-model="item.show"
                :active-text="item.title"
                inactive-text
                active-value="1"
                inactive-value="0"
              ></el-switch>
            </div>
          </template>
          <el-button slot="reference" type="text" style="margin-left: 20px; margin-right: 20px;">图层</el-button>
        </el-popover>
        <!-- 底图 -->
        <el-popover>
          <template v-for="(item,index) in FeatrueLayers_satellite">
            <div style="margin: 5px;">
              <el-switch
                disabled
                v-model="item.show"
                :active-text="item.title"
                inactive-text
                active-value="1"
                inactive-value="0"
              ></el-switch>
            </div>
          </template>
          <el-button slot="reference" type="text" style="margin-left: 20px; margin-right: 20px;">底图</el-button>
        </el-popover>
      </div>

      <!-- 列表窗 -->
      <div id="listWindow" :class="['listWindow',{'listWindow_on': listWindow.show_Controller}]">
        <!-- 开关按钮 -->
        <div class="switch" @click="listWindow_toggle">
          <i class="el-icon-d-arrow-left" v-if="!listWindow.show_Controller"></i>
          <i class="el-icon-d-arrow-right" v-if="listWindow.show_Controller"></i>
        </div>
        <!-- 主体 -->
        <div class="wrapper">
          <!-- 标签栏与内容 -->
          <div>
            <el-tabs
              closable
              @tab-remove="removeTab"
              type="card"
              :tabPosition="listWindow_tabPosition(listWindow.mode)"
              @tab-click="handleTabClick"
              v-model="listWindow.activeName"
            >
              <template v-for="item in FeatrueLayers">
                <el-tab-pane :label="item.title" :name="item.itype" v-if="item.show=='1'">
                  <!-- 渠道 -->
                  <BaseBoxQUDAO
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='qudaoshuiqing'"
                  ></BaseBoxQUDAO>
                  <!-- 闸阀水情 -->
                  <BaseBoxZHAFASHUIQING
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='zhafashuiqing'"
                  ></BaseBoxZHAFASHUIQING>
                  <!-- 闸阀状态 -->
                  <BaseBoxZHAFAZHUANGTAI
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='zhafazhuangtai'"
                  ></BaseBoxZHAFAZHUANGTAI>
                  <!-- 雨量站 -->
                  <BaseBoxYUQING
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='yuqing'"
                  ></BaseBoxYUQING>
                  <!-- 水库水情 -->
                  <BaseBoxSHUIKUSHUIQING
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='shuikushuiqing'"
                  ></BaseBoxSHUIKUSHUIQING>
                  <!-- 河道水情 -->
                  <BaseBoxHEDAOSHUIQING
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='hedaoshuiqing'"
                  ></BaseBoxHEDAOSHUIQING>
                  <!-- 视频站 -->
                  <BaseBoxSHIPINZHAN
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='shipin'"
                  ></BaseBoxSHIPINZHAN>
                  <!-- 图像站 -->
                  <BaseBoxTUXIANGZHAN
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='tuxiang'"
                  ></BaseBoxTUXIANGZHAN>
                  <!-- 运行工况 -->
                  <BaseBoxYUNXINGGONGKUANG
                    :featrue="item"
                    :search_FeatrueLayer="search_FeatrueLayer"
                    v-if="item.itype=='yunxinggongkuang'"
                  ></BaseBoxYUNXINGGONGKUANG>
                </el-tab-pane>
              </template>
            </el-tabs>
          </div>
          <!-- 图层没有时的提示信息 -->
          <div class="tip" v-if="featrueLayers_showing().length == 0">暂无任何显示图层</div>
        </div>
        <!-- 模式按钮 -->
        <div
          class="mode"
          v-show="listWindow.show_Controller && featrueLayers_showing().length != 0"
          @click="listWindow_changeMode"
        >
          <i class="el-icon-setting"></i>
        </div>
      </div>

      <!-- 详情(右边) -->
      <Drawer
        :title="details.info_right.STNM"
        v-model="details.drawer_show_right"
        width="600"
        :mask="false"
        placement="right"
        @on-close="closeDrawer('right')"
      >
        <!-- 渠道水情 -->
        <DetailQUDAO :info="details.info_right" v-if="details.info_right.itype=='qudaoshuiqing'"></DetailQUDAO>
        <!-- 雨情 -->
        <DetailYUQING
          :info="details.info_right"
          v-if="details.info_right.itype=='yuqing'"
        ></DetailYUQING>
        <!-- 水库水情 -->
        <DetailSHUIKUSHUIQING :info="details.info_right" v-if="details.info_right.itype=='shuikushuiqing'"></DetailSHUIKUSHUIQING>
        <!-- 河道水情 -->
        <DetailHEDAOSHUIQING :info="details.info_right" v-if="details.info_right.itype=='hedaoshuiqing'"></DetailHEDAOSHUIQING>
        <!-- 闸阀水情 -->
        <DetailZHAFASHUIQING
          :info="details.info_right"
          v-if="details.info_right.itype=='zhafashuiqing'"
        ></DetailZHAFASHUIQING>
        <!-- 闸阀状态 -->
        <DetailZHAFAZHUANGTAI
          :info="details.info_right"
          v-if="details.info_right.itype=='zhafazhuangtai'"
        ></DetailZHAFAZHUANGTAI>
        <!-- 视频站 -->
        <DetailSHIPINZHAN :info="details.info_right" v-if="details.info_right.itype=='shipin'"></DetailSHIPINZHAN>
        <!-- 图像站 -->
        <DetailTUXIANGZHAN :info="details.info_right" v-if="details.info_right.itype=='tuxiang'"></DetailTUXIANGZHAN>
        <!-- 运行工况 -->
        <DetailYUNXINGGONGKUANG
          :info="details.info_right"
          v-if="details.info_right.itype=='yunxinggongkuang'"
        ></DetailYUNXINGGONGKUANG>
      </Drawer>

      <!-- 详情(左边) -->
      <Drawer
        :title="details.info_left.STNM"
        v-model="details.drawer_show_left"
        width="600"
        :mask="false"
        placement="left"
        @on-close="closeDrawer('left')"
      >
        <!-- 渠道水情 -->
        <DetailQUDAO :info="details.info_left" v-if="details.info_left.itype=='qudaoshuiqing'"></DetailQUDAO>
        <!-- 雨情 -->
        <DetailYUQING :info="details.info_left" v-if="details.info_left.itype=='yuqing'"></DetailYUQING>
        <!-- 水库水情 -->
        <DetailSHUIKUSHUIQING :info="details.info_left" v-if="details.info_left.itype=='shuikushuiqing'"></DetailSHUIKUSHUIQING>
        <!-- 河道水情 -->
        <DetailHEDAOSHUIQING :info="details.info_left" v-if="details.info_left.itype=='hedaoshuiqing'"></DetailHEDAOSHUIQING>
        <!-- 闸阀水情 -->
        <DetailZHAFASHUIQING
          :info="details.info_left"
          v-if="details.info_left.itype=='zhafashuiqing'"
        ></DetailZHAFASHUIQING>
        <!-- 闸阀状态 -->
        <DetailZHAFAZHUANGTAI
          :info="details.info_left"
          v-if="details.info_left.itype=='zhafazhuangtai'"
        ></DetailZHAFAZHUANGTAI>
        <!-- 视频站 -->
        <DetailSHIPINZHAN :info="details.info_left" v-if="details.info_left.itype=='shipin'"></DetailSHIPINZHAN>
        <!-- 图像站 -->
        <DetailTUXIANGZHAN :info="details.info_left" v-if="details.info_left.itype=='tuxiang'"></DetailTUXIANGZHAN>
        <!-- 运行工况 -->
        <DetailYUNXINGGONGKUANG
          :info="details.info_left"
          v-if="details.info_left.itype=='yunxinggongkuang'"
        ></DetailYUNXINGGONGKUANG>
      </Drawer>
    </div>

    <!-- 表格 -->
    <div v-if="mapBox_show == 0">
      <!-- <router-view></router-view> -->
      <Table></Table>
    </div>

    <!-- 图片放大模态框 -->
    <div id="imgModal" class="imgModal" ref="imgModal">
      <!-- 关闭按钮 -->
      <!-- <span class="close" onclick="document.getElementById('imgModal').style.display='none'">&times;</span> -->
      <span class="close" @click="imgModal_hide">&times;</span>
      <!-- 弹窗内容 -->
      <el-carousel
        :autoplay="enlargeModal_carousel.autoplay"
        :arrow="enlargeModal_carousel.arrow"
        :indicator-position="enlargeModal_carousel.indicator_position"
        :style="enlargeModal_carousel.style"
        :initial-index="enlargeModal_carousel.initial_index"
        :loop="enlargeModal_carousel.loop"
        :trigger="enlargeModal_carousel.trigger"
        v-if="enlargeModal_carousel.show"
      >
        <el-carousel-item v-for="item in enlargeModal_carousel.Rows">
          <img :src="item.url" alt @click="setCarousel_autoplay">
        </el-carousel-item>
      </el-carousel>
    </div>
  </div>
</template>




<script>
import("./assets/shp.min.js");
import { loadModules } from "esri-loader";
// 引入Vue
import Vue from "vue";

// 引入页面
import Table from "./page/Table";

// 渠道水情
import BaseBoxQUDAO from "@/components/BaseBox/BaseBox-qudaoshuiqing.vue";
import DetailQUDAO from "@/components/Details/Details-qudaoshuiqing.vue";
// 闸阀状态
import BaseBoxZHAFAZHUANGTAI from "@/components/BaseBox/BaseBox-zhafazhuangtai.vue";
import DetailZHAFAZHUANGTAI from "@/components/Details/Details-zhafazhuangtai.vue";
// 闸阀水情
import BaseBoxZHAFASHUIQING from "@/components/BaseBox/BaseBox-zhafashuiqing.vue";
import DetailZHAFASHUIQING from "@/components/Details/Details-zhafashuiqing.vue";
// 雨情
import BaseBoxYUQING from "@/components/BaseBox/BaseBox-yuqing.vue";
import DetailYUQING from "@/components/Details/Details-yuqing.vue";
// 水库水情
import BaseBoxSHUIKUSHUIQING from "@/components/BaseBox/BaseBox-shuikushuiqing.vue";
import DetailSHUIKUSHUIQING from "@/components/Details/Details-shuikushuiqing.vue";
// 河道水情
import BaseBoxHEDAOSHUIQING from "@/components/BaseBox/BaseBox-hedaoshuiqing.vue";
import DetailHEDAOSHUIQING from "@/components/Details/Details-hedaoshuiqing.vue";
// 视频站
import BaseBoxSHIPINZHAN from "@/components/BaseBox/BaseBox-shipinzhan.vue";
import DetailSHIPINZHAN from "@/components/Details/Details-shipinzhan.vue";
// 图像站站
import BaseBoxTUXIANGZHAN from "@/components/BaseBox/BaseBox-tuxiangzhan.vue";
import DetailTUXIANGZHAN from "@/components/Details/Details-tuxiangzhan.vue";
// 运行工况
import BaseBoxYUNXINGGONGKUANG from "@/components/BaseBox/BaseBox-yunxinggongkuang.vue";
import DetailYUNXINGGONGKUANG from "@/components/Details/Details-yunxinggongkuang.vue";
import { debuglog } from "util";

// 引入公用方法
import FilterMethods from "@/assets/commonJS/FilterMethods";
import GetDataMethods from "@/assets/commonJS/GetDataMethods";
import { parse } from "path";
const options = { version: "3.28" };

export default {
  data() {
    return {
      listWindow_show_Controller: false,
      // 列表窗口对象
      listWindow: {
        // 列表窗显示控制器
        show_Controller: false,
        // 列表窗形态切换
        mode: 0,
        activeName: "qudaoshuiqing"
      },
      mapBox_show: 1,
      test: true,
      map: null,
      details: {
        // 详情标题
        drawer_title: "详情",
        // 用于控制 右侧详情栏
        drawer_show_right: false, // 显示隐藏
        info_right: { fff: "5" }, // 右侧详情栏信息
        // 用于控制 左侧详情栏
        drawer_show_left: false, // 显示隐藏
        info_left: { fff: "5" } // 左侧详情栏信息
      },
      // 查询字符串
      search_str: "",

      // 信息提示
      info_tips: { itype: "" },

      system_info: null,
      // 正在开发图层数据集合，其中包含图层对象
      FeatrueLayers: [],
      // 待开发的图层数据集合，其中包含图层对象
      FeatrueLayers_waiting: [
        {
          title: "墒情",
          show: "0"
        },
        {
          title: "蒸发量",
          show: "0"
        },
        {
          title: "地下水",
          show: "0"
        },
        {
          title: "地下水开采量",
          show: "0"
        },
        {
          title: "泵站",
          show: "0"
        },
        {
          title: "水质",
          show: "0"
        },
        {
          title: "潮位",
          show: "0"
        },
        {
          title: "泥沙",
          show: "0"
        },
        {
          title: "工情",
          show: "0"
        },
        {
          title: "气象",
          show: "0"
        }
      ],
      FeatrueLayers_base: [
        {
          title: "水源信息",
          show: "0"
        },
        {
          title: "取水设施",
          show: "0"
        },
        {
          title: "渠道",
          show: "0"
        },
        {
          title: "建筑物",
          show: "0"
        },
        {
          title: "行政单元",
          show: "0"
        },
        {
          title: "用水户",
          show: "0"
        },
        {
          title: "灌区信息",
          show: "0"
        },
        {
          title: "流域信息",
          show: "0"
        },
        {
          title: "通讯录",
          show: "0"
        },
        {
          title: "多媒体文件",
          show: "0"
        },
        {
          title: "监测站点",
          show: "0"
        }
      ],
      FeatrueLayers_layer: [
        {
          title: "行政区划",
          show: "0"
        },
        {
          title: "管道",
          show: "0"
        },
        {
          title: "危险区",
          show: "0"
        }
      ],
      FeatrueLayers_control:[
        {
          title: "闸阀控制",
          show: "0"
        }
      ],
      FeatrueLayers_satellite: [
        {
          title: "简单",
          show: "0"
        },
        {
          title: "街道",
          show: "0"
        },
        {
          title: "卫星",
          show: "0"
        }
      ],
      FL_Sel: [],
      // 用于选中提示的图形图层
      graphicsLayer_Selection: {
        LayerObject: null,
        graphics: []
      },
      // 图片放大模态框的走马灯对象
      enlargeModal_carousel: {
        Rows: [],
        initial_index: 2,
        arrow: "always",
        autoplay: false,
        indicator_position: "inside",
        loop: true,
        trigger: "click",
        style: {
          height: "90%"
        },
        show: true
      }
    };
  },
  mixins: [FilterMethods, GetDataMethods],
  components: {
    // page
    Table, // 表格
    // 渠道
    BaseBoxQUDAO,
    DetailQUDAO,
    // 闸阀水情
    BaseBoxZHAFASHUIQING,
    DetailZHAFASHUIQING,
    // 闸阀状态
    BaseBoxZHAFAZHUANGTAI,
    DetailZHAFAZHUANGTAI,
    // 雨情
    BaseBoxYUQING,
    DetailYUQING,
    // 河道水情
    BaseBoxHEDAOSHUIQING,
    DetailHEDAOSHUIQING,
    // 水库水情
    BaseBoxSHUIKUSHUIQING,
    DetailSHUIKUSHUIQING,
    // 视频站
    DetailSHIPINZHAN,
    BaseBoxSHIPINZHAN,
    // 图像站
    DetailTUXIANGZHAN,
    BaseBoxTUXIANGZHAN,
    // 运行工况
    BaseBoxYUNXINGGONGKUANG,
    DetailYUNXINGGONGKUANG
  },
  methods: {
    // 开关切换时的操作
    switchchange() {
      // if (this.mapBox_show == "0") {
      //   this.$router.push("/");
      // }
      // if (this.mapBox_show == "1") {
      //   this.$router.push("/");
      // }
    },
    // 当选择的监控图层发生变化
    // 重新显示或隐藏部分图层
    OnLayerChange(item) {
      var featrueLayers = this.FeatrueLayers;
      featrueLayers.forEach((v, index) => {
        if (v.show == "1") v.LayerObject.show();
        else {
          v.LayerObject.hide();
          if (this.FeatrueLayers[index].TextGraphicsLayerController) {
            this.FeatrueLayers[
              index
            ].TextGraphicsLayerController.removeAllTextGraphicsLayer();
          }
        }
      });
      // 获取正在显示的图层
      var featrueLayers_showing = this.featrueLayers_showing();
      // 如果存在 显示的图层
      if (featrueLayers_showing.length != 0) {
        // 如果要隐藏图层 并且 隐藏的图层是当前显示的图层的时候
        if (item.show == 0 && item.itype == this.listWindow.activeName) {
          // 激活的baseBox为正在显示的图层中的最后一个
          this.listWindow.activeName =
            featrueLayers_showing[featrueLayers_showing.length - 1].itype;
        } else if (item.show == 1) {
          // 如果要显示图层 并且 当前没有显示的图层的时候
          // 激活的baseBox为要显示的图层
          this.listWindow.activeName = item.itype;
          if (featrueLayers_showing.length == 1) {
            // 列表窗显示
            this.listWindow_show();
          }
        }
      } else {
        // 列表窗隐藏
        this.listWindow_hide();
      }
    },
    // 加载底图
    loadSHP(graphicsSHPlayer, wkid) {
      shp("/static/demo-hunanguanqu/shp.zip").then(function(data) {
        // shp("/static/demo-hunanguanqu/all.zip").then(function(data) {
        // shp("/static/demo-hunanguanqu/test.zip").then(function(data) {
        if (data && data.length > 0) {
          graphicsSHPlayer.clear();
          for (var i = 0; i < data.length; i++) {
            var features = data[i].features;

            // // 只看 XX 要素
            // if (
            //   // features[0].geometry.type != "MultiLineString" &&
            //   features[0].geometry.type != "Polygon"
            // ) {
            //   // console.log("SHP",data[i]);
            //   continue;
            // }
            // // 去掉 XX 图层
            // if (
            //   // data[i].fileName == "all/2000/RIVL" ||
            //   data[i].fileName == "all/2000/BOUA" ||
            //   data[i].fileName == "all/2000/LAKE" ||
            //   data[i].fileName == "all/2000/SKUA" ||
            //   data[i].fileName == "all/2000/CHUTE" ||
            //   data[i].fileName == "all/2000/FLUME" ||
            //   data[i].fileName == "all/2000/LRDL" ||
            //   data[i].fileName == "all/2000/shuiku"
            // ) {
            //   continue;
            // }

            console.warn("SHP", data[i]);

            for (var j = 0; j < features.length; j++) {
              var feature = features[j];
              var graphic = null;

              switch (feature.geometry.type) {
                case "Point": //构造点要素
                  var symbol = new esri.symbol.PictureMarkerSymbol(
                    // getRootPath() + "images/plot/point1.png",
                    "https://img03.sogoucdn.com/v2/thumb/resize/w/120/h/90/zi/on/iw/90.0/ih/67.5?t=2&url=http%3A%2F%2Fpic.baike.soso.com%2Fugc%2Fbaikepic2%2F7073%2Fcut-20181122191953-585494772_jpg_1322_1056_43672.jpg%2F300&appid=200524&referer=http://baike.sogou.com/v9901015.htm?fromTitle=%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9",
                    26.4,
                    32.4
                  );
                  var mappoint = new esri.geometry.Point(
                    feature.geometry.coordinates[0],
                    feature.geometry.coordinates[1],
                    new esri.SpatialReference(wkid)
                  );
                  var graphic = new esri.Graphic(mappoint, symbol);
                  break;
                case "LineString": //构造线要素
                  var symbol = new esri.symbol.SimpleLineSymbol(
                    esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                    // new dojo.Color([83, 167, 255]),
                    new dojo.Color([150, 204, 100]),
                    3.5 // 线的粗细程度
                  );
                  var polyline = new esri.geometry.Polyline(
                    feature.geometry.coordinates
                  );
                  var graphic = new esri.Graphic(polyline, symbol);
                  break;
                case "MultiLineString": // 构造多线要素
                  var symbol = new esri.symbol.SimpleLineSymbol(
                    esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                    // new dojo.Color([56, 163, 220]),
                    new dojo.Color([150, 204, 100]),
                    6.4 // 线的粗细程度
                  );
                  var polyline = new esri.geometry.Polyline(
                    feature.geometry.coordinates
                  );
                  var graphic = new esri.Graphic(polyline, symbol);
                  break;
                case "Polygon": //构造面要素
                  if (feature.properties && feature.properties.ADMATYPE) {
                    //县界图层不同颜色
                    var symbol = new esri.symbol.SimpleFillSymbol(
                      esri.symbol.SimpleFillSymbol.STYLE_SOLID,
                      new esri.symbol.SimpleLineSymbol(
                        esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                        new esri.Color([211, 211, 211]),
                        2
                      ),
                      new esri.Color([225, 225, 225, 0.3])
                      // new esri.Color([248, 248, 248])
                    );
                  } else {
                    //水库图层不同颜色
                    var symbol = new esri.symbol.SimpleFillSymbol(
                      esri.symbol.SimpleFillSymbol.STYLE_SOLID,
                      new esri.symbol.SimpleLineSymbol(
                        esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                        new esri.Color([110, 110, 110]),
                        1
                      ),
                      data[i].fileName == "shuiku"
                        ? new esri.Color([0, 191, 255, 0.8])
                        : new esri.Color([0, 191, 255, 0])
                    );
                  }
                  var polygon = new esri.geometry.Polygon(
                    feature.geometry.coordinates
                  );
                  var graphic = new esri.Graphic(polygon, symbol);
                  break;
              }
              graphicsSHPlayer.add(graphic);
            }
          }
        }
      });
    },
    // 设置地图 视图初始范围
    setMapExtent(options) {
      // 基本配置
      var initExtent = new esri.geometry.Extent(options);
      this.map.setExtent(initExtent);
    },
    // 获取各个图层信息
    getEachFeatureLayers(FeatureLayers) {
      for (let i = 0; i < FeatureLayers.length; i++) {
        // 获取图层数据（没有过滤条件的）
        this.getFeatrueLayerWithoutPreconditions(FeatureLayers[i].url, res => {
          var featureLayerOBJ = FeatureLayers[i];

          var data = res.data;
          var clone_data = JSON.parse(JSON.stringify(data));

          // 创建图层（根据图层数据）
          var featureLayer = this.createFeatrueLayer(data);

          //设置图层的特征点图标
          this.setFeatrueLayerSymbol(featureLayer, featureLayerOBJ.icon, {
            width: 12,
            height: 16
          });

          // 默认显示闸阀水情 和 渠道水情图层
          if (
            featureLayerOBJ.itype == "qudaoshuiqing" ||
            featureLayerOBJ.itype == "zhafashuiqing"
          ) {
            featureLayerOBJ.show = "1";
          }
          if (featureLayerOBJ.show != "1") featureLayer.hide(); // 根据数据里面的show属性 决定图层是否隐藏

          // 给图层对象添加 图层，图层特征点数据，地图
          featureLayerOBJ.LayerObject = featureLayer; // 添加图层到图层对象
          featureLayerOBJ.Rows = clone_data.features; // 添加图层特征点数据到图层对象
          featureLayerOBJ.map = this.map; // 添加地图到图层对象

          // 添加图层模块
          this.addFeatrueLayer(featureLayer, featureLayerOBJ);
          // 给图层里的特征点 添加事件
          this.addEventToJsonFlayer(featureLayer, featureLayerOBJ);
        });
      }
    },
    // 获取系统信息
    getAll() {
      // /static/demo-hunanguanqu/system.json
      this.axios.get("/guanqu/gis/system_info").then(res => {
        var data = res.data;
        // 保存系统信息
        this.system_info = data;
        // 设置地图 视图初始范围
        var GIS_CENTER = data.GIS_CENTER;
        this.setMapExtent({
          // xmin: 110.97802432948647,
          // ymin: 27.531235202509322,
          // xmax: 113.8843752444488,
          // ymax: 28.9647322423371,
          // 黄材灌区
          // xmin: 111.97802432948647,
          // xmax: 112.8843752444488,
          // ymin: 27.931235202509322,
          // ymax: 28.4647322423371,
          // 枉水灌区
          // xmin: 111.17802432948647,
          // xmax: 112.1843752444488,
          // ymin: 28.531235202509322,
          // ymax: 29.0647322423371,
          xmin: parseFloat(GIS_CENTER.xmin),
          xmax: parseFloat(GIS_CENTER.xmax),

          ymin: parseFloat(GIS_CENTER.ymin),
          ymax: parseFloat(GIS_CENTER.ymax),
          spatialReference: this.map.spatialReference
        });
        // 获取各个图层信息
        this.getEachFeatureLayers(data.FeatureLayers);
      });
    },
    // 给特征点元素点添加事件
    addEventToJsonFlayer(JsonFlayer, v) {
      JsonFlayer.on("click", evt => {
        //当鼠标点击元素
        // 抽屉组件默认显示表类型
        evt.graphic.attributes.rowinfo.tableType = {
          qdsq: "historyTable",
          zfsq: "historyTable"
        };
        // 展示抽屉组件
        this.showDrawer(evt, v);
      });
    },
    // 获取 子组件传过来 的绘图方法
    chart(item) {
      this.getChart = item.chart;
    },
    // 展示抽屉组件
    showDrawer(evt, v) {
      var graphic = evt.graphic;

      var show_right = () => {
        this.details.info_right = graphic.attributes;
        this.details.info_right.itype = v.itype;
        this.details.drawer_show_right = true;
      };

      // 如果左边抽屉组件显示，显示或替换右边抽屉组件
      if (this.details.drawer_show_left) {
        if (this.details.info_left.STCD == graphic.attributes.STCD) {
          // 如果打开的站点相同
          return this.$Message.warning("该站点详情已打开");
        }
        // 传递属性数据

        // 对应类型
        if (this.details.drawer_show_right) {
          this.details.drawer_show_right = false;
          this.details.info_right.itype = false;
          setTimeout(() => {
            show_right();
          }, 300);
        } else {
          show_right();
        }
      } else {
        // 否则 显示左边抽屉组件
        // 传递属性数据

        this.details.info_left = graphic.attributes;
        // 对应类型
        this.details.info_left.itype = v.itype;
        this.details.drawer_show_left = true;
      }
    },
    // 关闭抽屉组件
    closeDrawer(placement) {
      // 如果关闭的是左抽屉，并且右抽屉未开启
      if (placement == "left" && !this.details.drawer_show_right) {
        this.GraphicsLayer_Selection_clear(); // 取消所有站点的闪烁
      }

      // 如果关闭的是右抽屉，并且左抽屉未开启
      if (placement == "right" && !this.details.drawer_show_left) {
        this.GraphicsLayer_Selection_clear(); // 取消所有站点的闪烁
      }
      // 如果关闭的是右抽屉，并且左抽屉已开启
      if (placement == "right" && this.details.drawer_show_left) {
        // 设置中心缩放
        this.setMapCenterandZoom(
          this.details.info_left.LGTD,
          this.details.info_left.LTTD
        );
        // 取消所有站点的闪烁
        this.GraphicsLayer_Selection_clear();
        // 对应站点闪烁
        this.add_Graphic_To_GraphicsLayer_Selection(this.details.info_left);
      }

      this.details[`info_${placement}`].itype = null;
    },
    // 设置中心和缩放 (接受经纬度，和缩放比例)
    setMapCenterandZoom(LGTD, LTTD, Zoom) {
      this.map.centerAndZoom([Number(LGTD), Number(LTTD)], Zoom || 1);
    },
    // 处理标签页点击事件
    handleTabClick(item) {
      console.log("tabItem", item);
    },
    // 声音提示
    baiduVoice(str) {
      //调用百度接口----------------总感觉声音怪怪的
      var url =
        "http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&text=" +
        encodeURI(str);
      var n = new Audio(url);
      n.src = url;
      n.play();
    },
    // 正在显示的图层
    featrueLayers_showing() {
      var featrueLayers = this.FeatrueLayers;
      // 获取正在显示的图层
      var featrueLayers_showing = featrueLayers.filter(val => {
        if (val.show == 1) {
          return true;
        }
      });
      return featrueLayers_showing;
    },
    // 列表窗显示隐藏切换(控制面板)
    listWindow_toggle() {
      this.listWindow.show_Controller = !this.listWindow.show_Controller;
    },
    // 列表窗显示
    listWindow_show() {
      this.listWindow.show_Controller = true;
    },
    // 列表窗隐藏
    listWindow_hide() {
      this.listWindow.show_Controller = false;
    },
    // 列表窗形态切换
    listWindow_changeMode() {
      var mode = this.listWindow.mode;

      if (mode < 3) {
        this.listWindow.mode++;
        return console.log(this.listWindow.mode);
      }

      this.listWindow.mode = 0;
      console.log(this.listWindow.mode);
    },
    // 列表选项卡位置
    listWindow_tabPosition(mode) {
      switch (mode) {
        case 0:
          return "top";
        case 1:
          return "right";
        case 2:
          return "left";
        case 3:
          return "bottom";
        default:
          return "top";
      }
    },
    // 移除选项卡
    removeTab(item) {
      var featrueLayers = this.FeatrueLayers;
      featrueLayers.forEach((val, index) => {
        if (val.itype == item) {
          this.FeatrueLayers[index].show = 0;
          val.LayerObject.hide();
          if (this.FeatrueLayers[index].TextGraphicsLayerController) {
            this.FeatrueLayers[
              index
            ].TextGraphicsLayerController.removeAllTextGraphicsLayer();
          }
        }
      });
      // 获取正在显示的图层
      var featrueLayers_showing = this.featrueLayers_showing();
      if (featrueLayers_showing != 0) {
        // 激活的baseBox为正在显示的图层中的最后一个
        this.listWindow.activeName =
          featrueLayers_showing[featrueLayers_showing.length - 1].itype;
      } else {
        // 列表窗隐藏
        this.listWindow_hide();
      }
    },
    // 还原地图视图默认位置
    restoreMapView() {
      var system_info = this.system_info,
        GIS_CENTER = system_info.GIS_CENTER;
      // 设置地图 视图初始范围
      this.setMapExtent({
        // xmin: 110.97802432948647,
        // ymin: 27.531235202509322,
        // xmax: 113.8843752444488,
        // ymax: 28.9647322423371,
        xmin: parseFloat(GIS_CENTER.xmin),
        ymin: parseFloat(GIS_CENTER.ymin),
        xmax: parseFloat(GIS_CENTER.xmax),
        ymax: parseFloat(GIS_CENTER.ymax),
        spatialReference: this.map.spatialReference
      });
      this.map.infoWindow.hide();
    },
    // 查询图层 (要查询的图层类型, 过滤字段, 所属图层对象)
    search_FeatrueLayer(type, fields, featureLayerOBJ, callback, errCallback) {
      // 获取具有过滤条件的图层数据
      this.getFeatrueLayer(
        type,
        fields,
        res => {
          var clone_data = JSON.parse(JSON.stringify(res.data));
          // 创建图层（根据图层数据）
          var featrueLayer = this.createFeatrueLayer(res.data);
          // 移除图层对象里的相应图层
          this.removeFeatureLayer(featureLayerOBJ);
          // 设置图层的特征点图标
          this.setFeatrueLayerSymbol(featrueLayer, featureLayerOBJ.icon, {
            width: 16,
            height: 20
          });
          // 添加图层到地图
          this.addFeatrueLayerToMap(featrueLayer);
          // 更新图层对象集合里面 对应图层对象的 图层以及图层数据
          var newFeatureLayerOBJ = this.updateFeatrueLayers(
            featureLayerOBJ,
            featrueLayer,
            clone_data
          );
          // 如果有回调，执行回调
          if (typeof callback == "function") {
            callback(newFeatureLayerOBJ);
          }
          // 取消所有站点的闪烁
          this.GraphicsLayer_Selection_clear();
          // 给图层里的特征点 添加事件
          this.addEventToJsonFlayer(
            newFeatureLayerOBJ.LayerObject,
            newFeatureLayerOBJ
          );
        },
        errCallback
      );
    },
    // 获取没有过滤条件的图层数据
    getFeatrueLayerWithoutPreconditions(url, callback) {
      this.axios.get(url).then(res => {
        if (typeof callback == "function") {
          callback(res);
        }
      });
    },
    // 获取具有过滤条件的图层数据
    getFeatrueLayer(type, fields, callback, errCallback) {
      /* 
      type为数字，以下为不同数字对应图层
      4: 渠道水情
      5: 闸阀水情
      6: 闸阀状态
      7: 图像
      8: 视频  
      */
      var body = {
        _filter: new Object()
      };
      // 增加过滤字段
      for (var key in fields) {
        body._filter[key] = fields[key];
      }
      // 发送获取图层数据请求
      this.axios.post(`/guanqu/gis/FLayers?TYPE=${type}`, body).then(res => {
        if (typeof errCallback == "function") {
          errCallback();
        }
        if (typeof callback == "function") {
          callback(res);
        }
      });
    },
    // 移除指定图层
    removeFeatureLayer(featureLayerOBJ) {
      // 从地图中移除图层
      this.map.removeLayer(featureLayerOBJ.LayerObject);
      // 从控制面板的图层对象中清空图层及图层特征点数据
      featureLayerOBJ.LayerObject = null;
      featureLayerOBJ.Rows = [];
    },
    // 创建图层（根据图层数据）
    createFeatrueLayer(graphicsData) {
      // 把每个特征点的rowinfo数据放入每个特征点的属性中
      graphicsData.features.forEach((val, index) => {
        graphicsData.features[index].attributes.rowinfo =
          graphicsData.features[index].rowinfo;
      });

      //构建图层
      var featureCollection = {
        layerDefinition: graphicsData,
        featureSet: new esri.tasks.FeatureSet(graphicsData)
      };

      var featureLayer = new esri.layers.FeatureLayer(featureCollection);

      return featureLayer;
    },
    // 设置图层的特征点图标
    setFeatrueLayerSymbol(featureLayer, iconUrl, option) {
      var symbol = new esri.symbol.PictureMarkerSymbol(
        iconUrl,
        option ? option.width : 16,
        option ? option.height : 20
      );
      var renderer = new esri.renderer.SimpleRenderer(symbol);
      featureLayer.setRenderer(renderer);
    },
    // 添加图层到地图
    addFeatrueLayerToMap(featureLayer) {
      this.map.addLayer(featureLayer);
    },
    // 添加图层对象到控制面板
    addFeatrueLayerObjToBaseBox(featureLayerOBJ) {
      this.FeatrueLayers.push(featureLayerOBJ);
    },
    // 添加图层模块
    addFeatrueLayer(featureLayer, featureLayerOBJ) {
      // 添加图层到地图
      this.addFeatrueLayerToMap(featureLayer);
      // 添加图层对象到控制面板
      this.addFeatrueLayerObjToBaseBox(featureLayerOBJ);
    },
    // 替换指定图层对象里的图层和特征点数据
    updateFeatrueLayers(featureLayerOBJ, featureLayer, data) {
      featureLayerOBJ.LayerObject = featureLayer; // 添加图层到图层对象
      featureLayerOBJ.Rows = data.features; // 添加图层特征点数据到图层对象
      // 更新FeatrueLayers
      this.FeatrueLayers.forEach((val, index) => {
        if (val.itype == featureLayerOBJ.itype) {
          this.FeatrueLayers.splice(index, 1, featureLayerOBJ);
        }
      });
      return featureLayerOBJ;
    },
    // 添加选中提示的图形图层到地图
    add_GraphicsLayer_Selection_ToMap() {
      var graphicsLayer_Selection = new esri.layers.GraphicsLayer();
      this.map.addLayer(graphicsLayer_Selection);
      this.graphicsLayer_Selection.LayerObject = graphicsLayer_Selection;
    },
    // 添加图形符号到选中提示的图形图层
    add_Graphic_To_GraphicsLayer_Selection(item) {
      var point = new esri.geometry.Point(
        item.LGTD,
        item.LTTD,
        this.map.spatialReference
      );
      var pictureSymbol = new esri.symbol.PictureMarkerSymbol(
        // getRootPath() + "images/plot/point1.png",
        "https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2229475421,1482637450&fm=26&gp=0.jpg",
        20.4,
        20.4
      );
      var graphic = new esri.Graphic(point, pictureSymbol);
      this.graphicsLayer_Selection.LayerObject.add(graphic);
      this.graphicsLayer_Selection.graphics.push(graphic);
    },
    // 清除图形图层里的所有图形符号
    GraphicsLayer_Selection_clear() {
      this.graphicsLayer_Selection.LayerObject.clear();
    },
    // 功能开发提示
    developing_tip() {
      this.$Message.warning("从功能正在开发中...");
    },
    // 添加shp地图到map
    addSHPlayerToMap() {
      // 创建空底图（基础）部分
      var graphicsSHPlayer = new esri.layers.GraphicsLayer();
      // 往地图对象添置 空底图
      this.map.addLayer(graphicsSHPlayer);
      // 底图加载
      let wkid = this.map.spatialReference.wkid;
      this.loadSHP(graphicsSHPlayer, wkid);
    },
    enlarge_img(rows, index) {
      // 图片放大模态框展示
      this.imgModal_show();

      var newRows = rows
        ? JSON.parse(JSON.stringify(rows))
        : this.enlargeModal_carousel.rows;
      this.enlargeModal_carousel.Rows = newRows;
      this.enlargeModal_carousel.initial_index = index || 0;

      console.log("Rows", this.enlargeModal_carousel.Rows);
      console.log("initial_index", this.enlargeModal_carousel.initial_index);
    },
    // 图片放大模态框展示
    imgModal_show() {
      this.$refs.imgModal.style.display = "block";
      this.enlargeModal_carousel.show = true;
    },
    // 图片放大模态框隐藏
    imgModal_hide() {
      this.$refs.imgModal.style.display = "none";
      this.enlargeModal_carousel.show = false;
    },
    // 设置图片放大模态框轮播图自动播放
    setCarousel_autoplay() {
      this.enlargeModal_carousel.autoplay = true;
    }
  },
  computed: {},
  mounted() {
    // 引入地图模块,加载页面地图
    loadModules(["esri/map", "esri/layers/GraphicsLayer"], options)
      .then(([Map]) => {
        //创建地图对象
        // this.map = new Map("map", {
        this.map = new esri.Map("map", {
          logo: false,
          // fadeOnZoom: true,
          slider: true // 伸缩滑块
          // maxZoom:4, //最大空间等级
          // minZoom:5, //最小空间等级
          // navigationMode: 'css-transforms' // 调整或缩放地图平滑
          // zoom: 120,
        });

        // 设置地图的鼠标样式
        this.map.setMapCursor("pointer");

        // 添加SHP底图
        this.addSHPlayerToMap();

        // 获取系统信息
        // 包括各个图层及图层信息
        this.getAll();

        // 添加选中提示的图形图层到地图
        this.add_GraphicsLayer_Selection_ToMap();
      })
      .catch(err => {
        console.error(err);
      });
    //创建地图对象
    // this.map = new Map("map", {
    // this.map = new esri.Map("map", {
    //   logo: false,
    //   // fadeOnZoom: true,
    //   slider: true // 伸缩滑块
    //   // maxZoom:4, //最大空间等级
    //   // minZoom:5, //最小空间等级
    //   // navigationMode: 'css-transforms' // 调整或缩放地图平滑
    //   // zoom: 120,
    // });

    // // 设置地图的鼠标样式
    // this.map.setMapCursor("pointer");

    // // 添加SHP底图
    // this.addSHPlayerToMap();

    // // 获取系统信息
    // // 包括各个图层及图层信息
    // this.getAll();

    // // 添加选中提示的图形图层到地图
    // this.add_GraphicsLayer_Selection_ToMap();

    // 将APP组件配置到全局
    Vue.prototype.$App = this;

    // this.$App.getTableData_qudao_tree((data) => {
    //   console.log("treeList", data)
    // });

    // this.axios.get("/guanqu/table/xingzhen_tree?type=4")
    // .then(res => {
    //   var data = res.data;
    //   console.warn("XingZheng_Tree_Filter",this.$App.XingZheng_Tree_Filter("430100000000",data));
    // })
  }
};
</script>



<style lang="less">
#app {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow: hidden;
}
#listWindow {
  position: absolute;
  top: 150px;
  right: 20px;
  width: 480px;
  min-height: 200px;
  background-color: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  padding: 15px;
  box-sizing: border-box;
  z-index: 50;
  // overflow: auto;
  transition: 0.5s;
  // 开关按钮
  .switch {
    position: absolute;
    left: -30px;
    width: 30px;
    height: 80px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    // background: rgb(45, 183, 245);
    // background: #F56C6C;
    background: white;
    // background: white;
    border-top-left-radius: 5px;
    border-bottom-left-radius: 5px;
    border: rgb(126, 183, 240) 2px solid;
    border-right: 0;
    &:hover {
      filter: brightness(1.1);
    }
    i {
      font-size: 25px;
    }
  }
  // 模式切换按钮
  .mode {
    position: absolute;
    left: -12px;
    width: 28px;
    height: 28px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    // background: rgb(45, 183, 245);
    // background: #F56C6C;
    background: white;
    // background: white;
    border-radius: 50%;
    border: rgb(126, 183, 240) 2px solid;
    &:hover {
      filter: brightness(1.1);
    }
    i {
      font-size: 16px;
    }
  }
  // 主体内容
  .wrapper {
    width: 450px;

    // 图层没有时的提示
    .tip {
      width: 100%;
      min-height: 200px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 25px;
      color: #409eff;
    }
  }
  .el-tabs__header {
    min-width: 7.25rem;
  }
  // 分页器
  .el-pagination {
    white-space: unset;
    button,
    span:not([class*="suffix"]) {
      margin-bottom: 0.625rem;
    }
  }
}
.listWindow {
  transform: translate(500px);
}
// 列表窗展示
.listWindow_on {
  transform: translate(0);
}

#mapViewReductionButton {
  position: absolute;
  left: -80px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: #4c4c4c;
  border: 2px solid #4c4c4c;

  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;

  z-index: 100;
  &:hover {
    border: 2px solid #409eff;
    background: white;
    i {
      color: #409eff;
    }
  }
  i {
    font-size: 35px;
    color: #fff;
  }
}

#mapBox {
  height: 100%;
}
.button-bar {
  position: fixed;
  top: 100px;
  right: 0;
  padding: 2em;
  width: 200px;
  background-color: #33f;
}
.tool-box {
  padding: 5px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  position: absolute;
  top: 80px;
  right: 20px;
  background-color: #fff;
  line-height: 44px;
  color: #4c4c4c;
}
.tool-box a {
  color: #4c4c4c;
}
// baseBox控制面板单元格样式
.el-table {
  .el-table__row {
    cursor: pointer;
    td {
      padding: 0.125rem 0;
    }
  }
}
#app .el-table--small {
  th {
    padding: 0;
  }
}

// 表格单元格样式
.ivu-table-wrapper .ivu-table td,
.ivu-table-wrapper .ivu-table th {
  cursor: pointer;
  padding: 0.4rem 0;
  height: auto;
}
svg {
  // transition: 1s;
}
.topNav .el-switch__label,
.topNav .el-switch__label.is-active {
  color: white;
}
.ivu-table-wrapper .ivu-table-small td {
  height: 1.5625rem;
}
// 分割块
.divider {
  height: 0.625rem;
}
// 分页
.pagination {
  height: 23px;
  line-height: 23px;
}
// tips提示框
.esriPopupWrapper {
  // 头部
  .sizer {
    .titlePane {
      background: rgb(83, 167, 255);
      border-radius: 0;
      line-height: 30px;
      .title {
        background: rgb(83, 167, 255);
        border-bottom: 0;
      }
      // 最大化按钮
      .titleButton.maximize {
        top: 10px;
        display: none;
      }
      // 关闭按钮
      .titleButton {
        top: 6px;
        display: none;
      }
    }
  }
}
body {
  // iview选择框下拉最大高度
  .ivu-select-dropdown {
    max-height: 400px;
  }
  //
  .el-table__empty-block {
    text-align: left;
  }
}
// 滑框样式
.ivu-drawer {
  .el-tabs__content {
    overflow: unset;
  }
}

/* -------------图片放大(开始)----------------- */

/* 触发弹窗图片的样式 */
.Img {
  // border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}

.Img:hover {
  opacity: 0.9;
  // filter: brightness(1.5);
}

/* 弹窗背景 */
.imgModal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 9999; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0, 0, 0); /* Fallback color */
  background-color: rgba(0, 0, 0, 0.9); /* Black w/ opacity */
}

/* 图片 */
.modal-content {
  margin: auto;
  display: block;
  // width: 45%;
  max-width: 65%;
  // height: 90%;
  max-height: 90%;
}

/* 添加动画 */
.modal-content,
#caption {
  -webkit-animation-name: zoom;
  -webkit-animation-duration: 0.6s;
  animation-name: zoom;
  animation-duration: 0.6s;
}

@-webkit-keyframes zoom {
  from {
    -webkit-transform: scale(0);
  }
  to {
    -webkit-transform: scale(1);
  }
}

@keyframes zoom {
  from {
    transform: scale(0);
  }
  to {
    transform: scale(1);
  }
}

/* 关闭按钮 */
.close {
  position: absolute;
  top: 15px;
  right: 35px;
  color: #f1f1f1;
  font-size: 40px;
  font-weight: bold;
  transition: 0.3s;
}

.close:hover,
.close:focus {
  color: #bbb;
  text-decoration: none;
  cursor: pointer;
}

.el-carousel {
  .el-carousel__container {
    height: 100%;

    .el-carousel__item {
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
}

/* 小屏幕中图片宽度为 100% */
@media only screen and (max-width: 600px) {
  .modal-content {
    width: 100%;
  }
}

/* -------------图片放大(结束)----------------- */

.crp {
  cursor: pointer;
}
</style>